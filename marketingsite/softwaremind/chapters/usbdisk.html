

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Adding a new disk &#8212; TheDevManual 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/devmanual.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="TheDevManual 0.0.1 documentation" href="../index.html" />
    <link rel="next" title="User Interface Design" href="UIDesign.html" />
    <link rel="prev" title="VirtualBox on FreeBSD" href="virtualbox.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="adding-a-new-disk">
<h1>Adding a new disk<a class="headerlink" href="#adding-a-new-disk" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<p>Adding a new disk is relatively simple to a BSD system, However the most common
way of adding a disk is through the USB subsystem.  So I am trying to cover the
two approaches here.  Superficially the USB disk and the &#8216;normal&#8217; disk just need
to be &#8216;recognised&#8217; - that is have a device file put in /dev/ with an appropraite
driver.</p>
<p>Lets get to the point where a disk is recognised by dmesg.</p>
<div class="section" id="getting-to-dmesg">
<h2>Getting to dmesg<a class="headerlink" href="#getting-to-dmesg" title="Permalink to this headline">¶</a></h2>
<p>We can add a disk inside the PC as &#8216;normal&#8217; - that is unscrew the covers and
connect up a PATA (IDE) or SATA disk.  In pretty much every case here, you will
see that disk show up in dmesg</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ad4</span><span class="p">:</span> <span class="mi">57231</span><span class="n">MB</span> <span class="o">&lt;</span><span class="n">Hitachi</span> <span class="n">HTS541660J9SA00</span> <span class="n">SBBOC70P</span><span class="o">&gt;</span> <span class="n">at</span> <span class="n">ata2</span><span class="o">-</span><span class="n">master</span> <span class="n">SATA150</span>
</pre></div>
</div>
<p>So as expected I have a 60GB HDD on sata</p>
<p>However if I then plug in my USB enclosed external hard drive I see on Dmesg</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>umass0: &lt;Maxtor OneTouch, class 0/0, rev 2.00/1.22, addr 2&gt; on uhub2
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Maxtor OneTouch 0122&gt; Fixed Direct Access SCSI-4 device
da0: 40.000MB/s transfers
da0: 114473MB (234441648 512 byte sectors: 255H 63S/T 14593C)
</pre></div>
</div>
<p>now this shows two things.  FIrstly the umass driver.  this is the USB-mass
storage driver and it has found something on the USB Bus Then the driver is able
to recognise the actual model, and so I have now got a device driver lined up
and a &#8216;file&#8217; sitting in /dev/da0</p>
<p>I can now use this as normal and proceed to the next step.</p>
<p>If umass discovers the disk but there is no device listed, frankly its
tough. The drivers are not there and unless its vital, go buy another supported
disk.  See umass(8) for supported disks.  There are loads, and given you can buy
a 1TB for less than a hundred quid, its not worth worrying.</p>
<p>However if you really need that disk, try a firewire enclosure.  This has less
driver issues than USB.</p>
</div>
<div class="section" id="preparing-and-mounting-the-disk">
<h2>Preparing and mounting the disk<a class="headerlink" href="#preparing-and-mounting-the-disk" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple" start="0">
<li>Zero the disk</li>
<li>fdisk - Being nice to the PC BIOS</li>
<li>bsdlabel - prepping for BSD</li>
<li>newfs - writing the filesystems</li>
<li>mount</li>
</ol>
<p>bibliography: <a class="reference external" href="http://www.freebsd.org/doc/en/books/handbook/disks-adding.html">http://www.freebsd.org/doc/en/books/handbook/disks-adding.html</a></p>
</div>
<div class="section" id="zero-the-disk">
<h2>zero the disk<a class="headerlink" href="#zero-the-disk" title="Permalink to this headline">¶</a></h2>
<p>This is straightforward dd from /dev/zero to your disk.  I find that as a rough
rule of thumb you can zero an entire 40GB disk in 20 minutes. <a class="footnote-reference" href="#id3" id="id1">[1]</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#this overwrites the first 1024 bytes, effectviely killing the boot partition.</span>
<span class="c1">#leave off count to do the whole disk, make count 1000 to do first 1MB etc etc</span>

<span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">zero</span> <span class="n">of</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0</span> <span class="n">bs</span><span class="o">=</span><span class="mi">1024</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="fdisk">
<h2>fdisk<a class="headerlink" href="#fdisk" title="Permalink to this headline">¶</a></h2>
<p>You do not have to do this, except for the boot disk iSo for a USB disk that is
solely for backup, fine, used &#8216;dedicated&#8217; mode</p>
<p>PC BIOS usually &#8216;controls&#8217; a HDD.  THat is it mediates the access from the OS to
the BIOS to the HDD.  THats how the PC was designed, and frankly BSD ignores it
and can control the disk directly.  However if BSD is controlling the disk
directly, it cannot be used by some other OS that expects the BIOS to do the
work.  So BSD has &#8216;dedicated&#8217; mode that means you use that disk only fafter BSD
has booted - DOS wont like it, and BIOS wont boot from it.</p>
<p>a dedicated disk will look like /dev/da0e</p>
<p>We shall ignore that for now - the handbook recommends playing nice - using
&#8216;slices&#8217; A slice is a BSD term for one of the four BIOS partitions. so a BSD
disk with 4 partitions will have device files called</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4s1</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4s2</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4s3</span>  <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4s4</span>
</pre></div>
</div>
<p>Look at what is there</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># fdisk -s /dev/ad4</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4</span><span class="p">:</span> <span class="mi">116280</span> <span class="n">cyl</span> <span class="mi">16</span> <span class="n">hd</span> <span class="mi">63</span> <span class="n">sec</span>
<span class="n">Part</span>        <span class="n">Start</span>        <span class="n">Size</span> <span class="n">Type</span> <span class="n">Flags</span>
   <span class="mi">1</span><span class="p">:</span>          <span class="mi">63</span>   <span class="mi">117210177</span> <span class="mh">0xa5</span> <span class="mh">0x80</span>


<span class="c1"># fdisk /dev/ad4</span>
<span class="o">*******</span> <span class="n">Working</span> <span class="n">on</span> <span class="n">device</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4</span> <span class="o">*******</span>
<span class="n">parameters</span> <span class="n">extracted</span> <span class="kn">from</span> <span class="nn">in</span><span class="o">-</span><span class="n">core</span> <span class="n">disklabel</span> <span class="n">are</span><span class="p">:</span>
<span class="n">cylinders</span><span class="o">=</span><span class="mi">116280</span> <span class="n">heads</span><span class="o">=</span><span class="mi">16</span> <span class="n">sectors</span><span class="o">/</span><span class="n">track</span><span class="o">=</span><span class="mi">63</span> <span class="p">(</span><span class="mi">1008</span> <span class="n">blks</span><span class="o">/</span><span class="n">cyl</span><span class="p">)</span>

<span class="n">Figures</span> <span class="n">below</span> <span class="n">won</span><span class="s1">&#39;t work with BIOS for partitions not in cyl 1</span>
<span class="n">parameters</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">for</span> <span class="n">BIOS</span> <span class="n">calculations</span> <span class="n">are</span><span class="p">:</span>
<span class="n">cylinders</span><span class="o">=</span><span class="mi">116280</span> <span class="n">heads</span><span class="o">=</span><span class="mi">16</span> <span class="n">sectors</span><span class="o">/</span><span class="n">track</span><span class="o">=</span><span class="mi">63</span> <span class="p">(</span><span class="mi">1008</span> <span class="n">blks</span><span class="o">/</span><span class="n">cyl</span><span class="p">)</span>

<span class="n">Media</span> <span class="n">sector</span> <span class="n">size</span> <span class="ow">is</span> <span class="mi">512</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">BIOS</span> <span class="n">sector</span> <span class="n">numbering</span> <span class="n">starts</span> <span class="k">with</span> <span class="n">sector</span> <span class="mi">1</span>
<span class="n">Information</span> <span class="kn">from</span> <span class="nn">DOS</span> <span class="n">bootblock</span> <span class="ow">is</span><span class="p">:</span>
<span class="n">The</span> <span class="n">data</span> <span class="k">for</span> <span class="n">partition</span> <span class="mi">1</span> <span class="ow">is</span><span class="p">:</span>
<span class="n">sysid</span> <span class="mi">165</span> <span class="p">(</span><span class="mh">0xa5</span><span class="p">),(</span><span class="n">FreeBSD</span><span class="o">/</span><span class="n">NetBSD</span><span class="o">/</span><span class="mi">386</span><span class="n">BSD</span><span class="p">)</span>
    <span class="n">start</span> <span class="mi">63</span><span class="p">,</span> <span class="n">size</span> <span class="mi">117210177</span> <span class="p">(</span><span class="mi">57231</span> <span class="n">Meg</span><span class="p">),</span> <span class="n">flag</span> <span class="mi">80</span> <span class="p">(</span><span class="n">active</span><span class="p">)</span>
        <span class="n">beg</span><span class="p">:</span> <span class="n">cyl</span> <span class="mi">0</span><span class="o">/</span> <span class="n">head</span> <span class="mi">1</span><span class="o">/</span> <span class="n">sector</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">end</span><span class="p">:</span> <span class="n">cyl</span> <span class="mi">1023</span><span class="o">/</span> <span class="n">head</span> <span class="mi">254</span><span class="o">/</span> <span class="n">sector</span> <span class="mi">63</span>
<span class="n">The</span> <span class="n">data</span> <span class="k">for</span> <span class="n">partition</span> <span class="mi">2</span> <span class="ow">is</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">UNUSED</span><span class="o">&gt;</span>
<span class="n">The</span> <span class="n">data</span> <span class="k">for</span> <span class="n">partition</span> <span class="mi">3</span> <span class="ow">is</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">UNUSED</span><span class="o">&gt;</span>
<span class="n">The</span> <span class="n">data</span> <span class="k">for</span> <span class="n">partition</span> <span class="mi">4</span> <span class="ow">is</span><span class="p">:</span>
<span class="o">&lt;</span><span class="n">UNUSED</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>this tells me that there are 4 slices or partitions, just as the BIOS expects,
but that only one is initialised in a form readable to BIOS (ie the first
partition, which the BIOS needs to read to boot the disk).  The rest is handled
by BSD itself, using infomration found in bsdlabel</p>
<p>So finally how to initialise my external USB hard disk to have slices the nice
way</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fdisk</span> <span class="o">-</span><span class="n">BI</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0</span>
<span class="c1">#this will</span>
<span class="c1"># -I Initialize sector 0 slice table for one FreeBSD slice covering the entire disk.</span>
<span class="c1"># -B Reinitialize the boot code contained in sector 0 of the disk</span>

<span class="n">GEOM</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">is</span> <span class="n">considered</span> <span class="n">a</span> <span class="n">benign</span> <span class="n">warning</span> <span class="n">by</span> <span class="n">the</span> <span class="n">man</span> <span class="n">file</span><span class="o">.</span>
</pre></div>
</div>
<p><a class="footnote-reference" href="#id4" id="id2">[2]</a></p>
<p>You will know have one slice on the disk, /dev/da0s1 This is generally what
happens when you use sysinstall and just choose &#8216;use whole disk&#8217;</p>
</div>
<div class="section" id="bsdlabel">
<h2>bsdlabel<a class="headerlink" href="#bsdlabel" title="Permalink to this headline">¶</a></h2>
<p>Here is where we create the traditional BSD partitions (not restrictive 4 BIOS
paritions which are called slices now).  The bsdlabel stores partition size and
location info, as well as other stuff.  it is read by BSD and used to control
the HDD, bypassing the BIOS.</p>
<p>How do BSD partitions work? Basically there are eight partitions (a-h).  (see
<a class="reference external" href="http://www.freebsd.org/doc/en/books/handbook/install-steps.html">http://www.freebsd.org/doc/en/books/handbook/install-steps.html</a>)</p>
<p>The a partition is solely for system disks (ie the disk you boot from). It is
only used for the root (/) partition.  The b partition is used for swap space.
Any number of disks can have swap space, and the rule of thumb is to have twice
RAM as swap.  The c partition is a sort of whole disk placeholder</p>
<p>the e partition is usually the point to put /var in system disks and everything
for other disks the f partition is usually the everything point (/usr) for
system disks</p>
<dl class="docutils">
<dt>-B will turn a slice into a bootable slice - by copying the boot code from</dt>
<dd>/boot/boot into the bootsector of the slice being worked on. It useful for
system disks but this is not a system disk</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#bsdlabel -w /dev/da0s1</span>
</pre></div>
</div>
<p>OK this has built a standard label onto that slice. But it does not have our BSD
partitions in it. we want swap, we want /usr etc.  We get this by using</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bsdlabel</span> <span class="o">-</span><span class="n">e</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0s1</span>
</pre></div>
</div>
<p>this will use vi (EDITOR) to edit the label.  Now a couple of points.  firstly,
use -n</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bsdlabel</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">n</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0s1</span>
</pre></div>
</div>
<p>This will not write to the label, but do all calculations and output some hints
for you.  Second, the bsdlabel is good for calculating human-sized amounts</p>
<p>so when I freshly create the bsdlabel and use -e I get to see a label like this</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># /dev/da0s1:</span>
<span class="mi">8</span> <span class="n">partitions</span><span class="p">:</span>
<span class="c1">#        size   offset    fstype   [fsize bsize bps/cpg]</span>
  <span class="n">a</span><span class="p">:</span> <span class="mi">234436466</span>       <span class="mi">16</span>    <span class="n">unused</span>        <span class="mi">0</span>     <span class="mi">0</span>
  <span class="n">c</span><span class="p">:</span> <span class="mi">234436482</span>        <span class="mi">0</span>    <span class="n">unused</span>        <span class="mi">0</span>     <span class="mi">0</span>         <span class="c1"># &quot;raw&quot; part, don&#39;t edit</span>
</pre></div>
</div>
<p>The whole disk is taken up with the a partition which is OKish but not to
convention.</p>
<p>I simply edit it using vi as follows</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># /dev/da0s1:</span>
<span class="mi">8</span> <span class="n">partitions</span><span class="p">:</span>
<span class="c1">#        size   offset    fstype   [fsize bsize bps/cpg]</span>
  <span class="n">c</span><span class="p">:</span> <span class="mi">234436482</span>        <span class="mi">0</span>    <span class="n">unused</span>        <span class="mi">0</span>     <span class="mi">0</span>         <span class="c1"># &quot;raw&quot; part, don&#39;t edit</span>
  <span class="n">e</span><span class="p">:</span> <span class="o">*</span>                <span class="o">*</span>    <span class="mf">4.2</span><span class="n">BSD</span>        <span class="mi">0</span>     <span class="mi">0</span>
</pre></div>
</div>
<p>I have told it to create a e:  partition of &#8216;the whole remainder of the disk&#8217; and it does the hard part for me.</p>
<p>Alternatives include</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># /dev/da0s1:</span>
<span class="mi">8</span> <span class="n">partitions</span><span class="p">:</span>
<span class="c1">#        size   offset    fstype   [fsize bsize bps/cpg]</span>
  <span class="n">a</span><span class="p">:</span>       <span class="mi">30</span><span class="n">G</span>      <span class="mi">16</span>    <span class="mf">4.2</span><span class="n">BSD</span>        <span class="mi">0</span>     <span class="mi">0</span>
  <span class="n">b</span><span class="p">:</span>        <span class="mi">6</span><span class="n">G</span>       <span class="o">*</span>    <span class="n">swap</span>
  <span class="n">c</span><span class="p">:</span> <span class="mi">251658225</span>       <span class="mi">0</span>    <span class="n">unused</span>        <span class="mi">0</span>     <span class="mi">0</span>         <span class="c1"># &quot;raw&quot; part, don&#39;t edit</span>
  <span class="n">e</span><span class="p">:</span>         <span class="o">*</span>       <span class="o">*</span>    <span class="mf">4.2</span><span class="n">BSD</span>        <span class="mi">0</span>     <span class="mi">0</span>
<span class="p">(</span><span class="n">cf</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">keramida</span><span class="o">.</span><span class="n">wordpress</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">2008</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">moving</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">freebsd</span><span class="o">-</span><span class="n">installation</span><span class="o">/</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-file-system">
<h2>Building the file system<a class="headerlink" href="#building-the-file-system" title="Permalink to this headline">¶</a></h2>
<p>Now in the first example of editing the bsdlabel above, I have only created one
partition so I only need one file system to be written on the partition.  I just
need to run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">newfs</span> <span class="o">-</span><span class="n">L</span> <span class="n">BACKUP</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0s1e</span>
</pre></div>
</div>
<p>however with the second where it is looking a bit like a system disk</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">newfs</span> <span class="o">-</span><span class="n">L</span> <span class="n">ROOT</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0s1a</span>
<span class="c1">#swap needs no filesystem</span>
<span class="n">newfs</span> <span class="o">-</span><span class="n">L</span> <span class="n">USR</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0s1e</span>
</pre></div>
</div>
</div>
<div class="section" id="mount">
<h2>Mount<a class="headerlink" href="#mount" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># mkdir /mnt/disk1</span>
<span class="c1"># mount /dev/da0s1e /mnt/disk1</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># dd if=/dev/zero of=/dev/da1 bs=1k count=1</span>
<span class="c1"># fdisk -BI da1 #Initialize your new disk</span>
<span class="c1"># bsdlabel -B -w da1s1 auto #Label it.</span>
<span class="c1"># bsdlabel -e da1s1 # Edit the bsdlabel just created and add any partitions.</span>
<span class="c1"># mkdir -p /1</span>
<span class="c1"># newfs /dev/da1s1e # Repeat this for every partition you created.</span>
<span class="c1"># mount /dev/da1s1e /1 # Mount the partition(s)</span>
<span class="c1"># vi /etc/fstab # Add the appropriate entry/entries to your /etc/fstab.</span>
</pre></div>
</div>
</div>
<div class="section" id="actual-results">
<h2>Actual results<a class="headerlink" href="#actual-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@paullaptop</span> <span class="o">~</span><span class="p">]</span><span class="c1"># dd if=/dev/zero of=/dev/da0 bs=1024 count=10</span>
<span class="mi">10</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="ow">in</span>
<span class="mi">10</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="n">out</span>
<span class="mi">10240</span> <span class="nb">bytes</span> <span class="n">transferred</span> <span class="ow">in</span> <span class="mf">0.208999</span> <span class="n">secs</span> <span class="p">(</span><span class="mi">48995</span> <span class="nb">bytes</span><span class="o">/</span><span class="n">sec</span><span class="p">)</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@paullaptop</span> <span class="o">~</span><span class="p">]</span><span class="c1"># fdisk -BI /dev/da0</span>
<span class="o">*******</span> <span class="n">Working</span> <span class="n">on</span> <span class="n">device</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">da0</span> <span class="o">*******</span>
<span class="n">fdisk</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">fdisk</span> <span class="n">partition</span> <span class="n">table</span> <span class="n">found</span>
<span class="n">fdisk</span><span class="p">:</span> <span class="n">Geom</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span> <span class="s2">&quot;da0&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="just-format-a-usb-disk-for-use-between-bsd-and-windows">
<h2>Just format a USB Disk for use between BSD and Windows<a class="headerlink" href="#just-format-a-usb-disk-for-use-between-bsd-and-windows" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://lists.freebsd.org/pipermail/freebsd-questions/2010-May/215819.html">http://lists.freebsd.org/pipermail/freebsd-questions/2010-May/215819.html</a></li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/BSD_disklabel">http://en.wikipedia.org/wiki/BSD_disklabel</a></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="n">BSD</span><span class="o">-</span><span class="n">derived</span> <span class="n">computer</span> <span class="n">operating</span> <span class="n">systems</span> <span class="p">(</span><span class="n">including</span> <span class="n">NetBSD</span><span class="p">,</span>
<span class="n">OpenBSD</span><span class="p">,</span> <span class="n">FreeBSD</span> <span class="ow">and</span> <span class="n">DragonFly</span> <span class="n">BSD</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">in</span> <span class="n">related</span> <span class="n">operating</span>
<span class="n">systems</span> <span class="n">such</span> <span class="k">as</span> <span class="n">SunOS</span><span class="p">,</span> <span class="n">a</span> <span class="n">disklabel</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">record</span> <span class="n">stored</span> <span class="n">on</span> <span class="n">a</span> <span class="n">data</span>
<span class="n">storage</span> <span class="n">device</span> <span class="n">such</span> <span class="k">as</span> <span class="n">a</span> <span class="n">hard</span> <span class="n">disk</span> <span class="n">that</span> <span class="n">contains</span> <span class="n">information</span> <span class="n">about</span>
<span class="n">the</span> <span class="n">location</span> <span class="n">of</span> <span class="n">the</span> <span class="n">partitions</span> <span class="n">on</span> <span class="n">the</span> <span class="n">disk</span><span class="o">.</span> <span class="n">Disklabels</span> <span class="n">were</span>
<span class="n">introduced</span> <span class="ow">in</span> <span class="n">the</span> <span class="mf">4.3</span><span class="n">BSD</span><span class="o">-</span><span class="n">Tahoe</span> <span class="n">release</span><span class="o">.</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">Disklabels</span> <span class="n">are</span> <span class="n">usually</span>
<span class="n">edited</span> <span class="n">using</span> <span class="n">the</span> <span class="n">disklabel</span> <span class="n">utility</span><span class="o">.</span> <span class="n">In</span> <span class="n">later</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">FreeBSD</span>
<span class="n">this</span> <span class="n">was</span> <span class="n">renamed</span> <span class="k">as</span> <span class="n">bsdlabel</span><span class="o">.</span>
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Will this be unreadable?  Well yes, with caveats.  Overwriting
the disk with zeros once makes it unrecoverable except by
scanning the surface of the disk with specialised equipment
which can detect the tiny magnetic differences between a zero
that was overwritten with zero and a one that was overwritten
with zero.  Unless you are a suspected terrorist or have stolen
a billion dollars, overwriting with zeros once is fine.  If you
are a terrorist, firstly do not put your secret plans on a
computer in the first place, secondly, use a masonary drill to
destroy the platters, a few holes sufficient heat and presto,
no recovery.  Frankly this is all a bit academic.  If you know
the cops will get you in sufficient time for you to zero a disk
or otherwise destroy it, the cops need to get better funding.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>In order for the BIOS to boot the kernel, certain conventions
must be adhered to.  Sector 0 of the disk must contain boot code,
a slice table, and a magic number.  BIOS slices can be used to
break the disk up into several pieces.  The BIOS brings in sector
0 and verifies the magic num- ber.  The sector 0 boot code then
searches the slice table to determine which slice is marked
<a href="#id5"><span class="problematic" id="id6">``</span></a>active&#8217;&#8216;.  This boot code then brings in the bootstrap from the
active slice and, if marked bootable, runs it.  Under DOS, you
can have one or more slices with one active.  The DOS fdisk
utility can be used to divide space on the disk into slices and
set one active.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Paul Brian.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>