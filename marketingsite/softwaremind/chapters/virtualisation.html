

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Virtualisation &#8212; TheDevManual 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/devmanual.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="TheDevManual 0.0.1 documentation" href="../index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="virtualisation">
<h1>Virtualisation<a class="headerlink" href="#virtualisation" title="Permalink to this headline">¶</a></h1>
<div class="figure" id="id4">
<img alt="chapters/../img/virtualisation.png" class="screenshot" src="chapters/../img/virtualisation.png" />
<p class="caption"><span class="caption-text">Windows and Ubunutu running inside a FreeBSD Host.  Cool Huh?</span></p>
</div>
<p>There are two major types of virtualisation possible these days <a class="reference external" href="/SoHoFromScratch/jails.html">Jails</a> about which I have written ad-nauseam and think
make excellant option for a FreeBSD system.  Jails however can only virtualise
the host OS - that is I can have a dozen FreeBSD servers running on one host.
But I cannot put Windows on.</p>
<p>If I want to run Windows, then it is over to &#8220;true&#8221; virtualisation.  Its only
called true by vendors of this class of software, but frankly the name has stuck
a little.</p>
<p>So, how does one do this, and more importantly, why?</p>
<div class="section" id="why-virtualise">
<h2>Why virtualise?<a class="headerlink" href="#why-virtualise" title="Permalink to this headline">¶</a></h2>
<p>Well, the obvious reasons do count - improved power usage, space usage,
reduction in sheer complexity. Its usually cheaper and easier to buy one big
server and put a dozen servers on it, than to actually buy a dozen servers. <a class="footnote-reference" href="#id3" id="id1">[1]</a></p>
<p>I use Jails all the time - in fact it is a driving reason and enabler for giving
each developer a complete logical clone of the production system to develop
<em>on</em>.  If every developer has a set of machines they can put the complete system
onto, several things happen</p>
<ul class="simple">
<li>deployments are scripted.  If the developer has to deploy to a server each
time they want to test, magically deploy scripts are written <em>and kept
up-to-date</em>.</li>
<li>integration problems become more visible early.  Deploying your local working
copy to your local server set is fine, but if someone checks in bad code, it
gets noticed, quick.</li>
</ul>
<p>But that is fine for Jails.  Why this mucking around with Windows?</p>
<p>Quite simple - for testing.</p>
<p>Want to do some web-based UI testing and verification.  Then <a class="reference external" href="/SoHoFromScratch/selenium.html">Selenium</a> from ThoughtWorks is your friend.  I can
script my browser to open websites, enter in data, capture results, under Python
control and so able to do all that tedious testing you previously hated.</p>
<p>So here we go...</p>
<div class="section" id="virtualbox-or-kvm">
<h3>VirtualBox or KVM?<a class="headerlink" href="#virtualbox-or-kvm" title="Permalink to this headline">¶</a></h3>
<p>VirtualBox is a commercial company that launched a virtualisation machine
manager (VMM) and then realised it might improve sales if it open-sourced the
code.  The OSS version is slightly crippled (it cannot pass through USB hard
disks or something mostly irrelevant) but it is a good, solid platform and I
highly recommend it.  In fact, the above screenshot is from VirtualBox.</p>
<p>refs:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">freebsd</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">en_US</span><span class="o">.</span><span class="n">ISO8859</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">books</span><span class="o">/</span><span class="n">handbook</span><span class="o">/</span><span class="n">virtualization</span><span class="o">-</span><span class="n">host</span><span class="o">.</span><span class="n">html</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">freebsd</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">VirtualBox</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">emulators</span><span class="o">/</span><span class="n">virtualbox</span><span class="p">;</span> <span class="n">make</span> <span class="n">install</span> <span class="n">clean</span>
<span class="n">echo</span> <span class="n">vboxdrv_load</span><span class="o">=</span><span class="s2">&quot;YES&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">loader</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The principle behind setup is simple.  Allocate a certain amount of your
harddisk to become a single file.  That single file will pretend to be a real
Hard Disk to the VM, which will also have access to all your peripherals,
network card and a pre-determined slice of RAM.</p>
<p>For once this is simple enough to do with a GUI - and I recommend keeping this
simple.  For me clever virtualisation using VMM is for the birds.  Jails do more
than enough if all you want is servers.</p>
</div>
<div class="section" id="proc-filesystem">
<h2>proc filesystem<a class="headerlink" href="#proc-filesystem" title="Permalink to this headline">¶</a></h2>
<p>VirtualBox makes use of the /proc file system (not same as linprocfs which we
enabled for qemu - qemu was run as linux compatibility.  Virtualbox runs native
on FreeBSD.)</p>
<p>either</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">-</span><span class="n">t</span> <span class="n">procfs</span> <span class="n">proc</span> <span class="o">/</span><span class="n">proc</span>

<span class="p">(</span><span class="n">proc</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">virtual</span> <span class="n">device</span> <span class="n">so</span> <span class="n">it</span> <span class="n">has</span> <span class="n">no</span> <span class="n">leading</span> <span class="o">/</span> <span class="o">-</span> <span class="n">the</span> <span class="n">mountpoint</span> <span class="n">does</span> <span class="n">however</span><span class="p">)</span>
</pre></div>
</div>
<p>or put this into /etc/fstab.  Probably best to do this...</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">proc</span>           <span class="o">/</span><span class="n">proc</span>           <span class="n">procfs</span>  <span class="n">rw</span>              <span class="mi">0</span>       <span class="mi">0</span>
</pre></div>
</div>
<p>so you see:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pbrian_laptop</span><span class="c1"># cat /etc/fstab</span>
<span class="c1"># Device    Mountpoint FStype Options Dump    Pass#</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ad4s1b</span> <span class="n">none</span>      <span class="n">swap</span>    <span class="n">sw</span>      <span class="mi">0</span>       <span class="mi">0</span>
<span class="o">...</span>
<span class="n">proc</span>              <span class="o">/</span><span class="n">proc</span>       <span class="n">procfs</span>  <span class="n">rw</span>      <span class="mi">0</span>       <span class="mi">0</span>
</pre></div>
</div>
<p>Thats it.  (Well, nearly). To start run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ VirtualBox
</pre></div>
</div>
<p>You will get a GUI wizard (!).</p>
<p>It seems straightforward - firstly create the virtual hard disk (VirtualBox uses
a format no other virtualisation software does, so this is the only way), assign
the amount of RAM you want to let the VM use.  Since my only intention with this
form of virtualisation is to emulate simple desktop clients, 192MB is more than
enough all round.  (well, OK, this depends, emulating XP running a many flash
clients <em>eats</em> RAM.  God, this can be a painful setup.)</p>
<p>Oh, yes, 6GB of Hard disk space seems to be a good amount too.  Down to 2GB and
both ubunutu and windows might complain.  I had a kernel panic - but I increased
RAM from 64 to 192 (and gave it 2 cpus). worked ok.</p>
</div>
<div class="section" id="install-the-vm">
<h2>Install the VM<a class="headerlink" href="#install-the-vm" title="Permalink to this headline">¶</a></h2>
<p>We want the VM to boot up, and then look for a bootable image (ie the VM boots
and is given a install CD).  This can be done in two ways - by allowing the VM
access to our own CD/DVD drive, or by mounting an ISO for it.  THe second is a
lot more convenient - especially for ubuntu.</p>
<p>So download the latest Ubuntu .iso (weirdly I was experimenting with this on the
day of a new Ubunutu release, so my download took forever.)  And then goto the
CD tab in the VMM GUI.  tick the &#8216;Mount CD Drive&#8217; and then tick &#8216;Mount from
ISO&#8217;.  Simply find the iso image on your HDD, and away we go.</p>
</div>
<div class="section" id="speeding-things-up">
<h2>Speeding things up<a class="headerlink" href="#speeding-things-up" title="Permalink to this headline">¶</a></h2>
<p>There are two innovations in hardware-based virtualisation.  VMX extensions and
nested paging.  The first has been around for a couple of years, and, in
essence, performs in hardware the process-marking function that we see in Jails
(ie marking each process as belonging to a given VM).</p>
<p>The second is most recent, found in the Nehalem-range on Intel CPUs (Nehalem is
surprisingly awkward to pronounce - I have it on good assurance that it is
pronounced Neham-a-llama-la-la-ding-dong).  Without this, a VM must pretend it
holds a paging cache - so any cache misses end up being processed twice, once in
the &#8220;real&#8221; cache, once in the VM version.</p>
<p>Anyway, a CPU without VMX flags and Neham-a-llama-la-la-ding-dong, can be around
3-5 times slower in virtualisation.  So its worth it.</p>
</div>
<div class="section" id="screensize">
<h2>screensize<a class="headerlink" href="#screensize" title="Permalink to this headline">¶</a></h2>
<p>Refs</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">forums</span><span class="o">.</span><span class="n">opensuse</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">how</span><span class="o">-</span><span class="n">faq</span><span class="o">-</span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">/</span><span class="n">unreviewed</span><span class="o">-</span><span class="n">how</span><span class="o">-</span><span class="n">faq</span><span class="o">/</span><span class="mi">385392</span><span class="o">-</span><span class="n">virtualbox</span><span class="o">-</span><span class="n">screen</span><span class="o">-</span><span class="n">size</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<p>My god - what a palaver.  The basic screen size of 800x640 pixels is what we get
out of the (Virtual)Box.  But try making the thing show the right size.  You
need the extra drivers produced by VirtualBox.</p>
<p>VirtualBox comes with a set of extra goodies, called GuestAdditions. This is an
iso of drivers and so forth that amoungst other things allow you to set the
screen resolution &gt; 800x600.</p>
<p>Now, the instructions say click Devices, then Download Guest Additions.
Unfortunately the download fails.  The iso is not kept where the VMM thinks it
is</p>
<p>The reason - the iso is normally included in the binary that one downloads, for
FreeBSD its not.</p>
<p>so, to solve this we do the following ...</p>
<p>Open up my Ubunutu guest VM.  In the VM, we install virtualbox-ose-guestaddition
using synaptic package manager.  So I download it from the Internet using the
VM.  But I need it in the host.</p>
<p>Then</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ updatedb
$ locate virtualbox | grep guest
</pre></div>
</div>
<p>There is a .deb package of 24MB, scp that to my actual host (yes, from the VM to
the host) and use <em>deb2targz</em> to extract it, and eventually pull out the iso.</p>
<p>Now put the iso where devices&gt; tries to look for it
(/usr/local/share/virtualbox/VBoxGuestAdditions.iso)</p>
<p>Now it mounts a CDROM, inside the guest.</p>
<p>You need to run the appropriate install pkg on the cd rom for the guest OS
(Linux/win32/solaris are what I can see)</p>
<p>Now with that in place we need to do some extra work</p>
<p>On the <em>host</em> machine set a VirtualBox parameter</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ VBoxManage setextradata global GUI/MaxGuestResolution any
</pre></div>
</div>
<p>Now restart your Guest OS.  It is unlikely it is correct, and if that is a Unix
box it is because the xorg.conf file is incorrect.  I opened up /etc/xorg.conf
in the guest machine and it had two lines from VirtualBox.</p>
<p>I then added</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Section</span> <span class="s2">&quot;Screen&quot;</span>
        <span class="n">Identifier</span> <span class="s2">&quot;Screen0&quot;</span>
        <span class="n">Device</span>     <span class="s2">&quot;Card0&quot;</span>
        <span class="n">Monitor</span>    <span class="s2">&quot;Monitor0&quot;</span>
        <span class="n">DefaultDepth</span> <span class="mi">24</span>

        <span class="n">SubSection</span> <span class="s2">&quot;Display&quot;</span>
                <span class="n">Viewport</span>   <span class="mi">0</span> <span class="mi">0</span>
                <span class="n">Depth</span>     <span class="mi">24</span>
                <span class="n">Modes</span> <span class="s2">&quot;1280x1024 1028x768&quot;</span>
        <span class="n">EndSubSection</span>
<span class="n">EndSection</span>
</pre></div>
</div>
<p>Restarted the Guest OS and suddenly I had a choice of resolutions.</p>
</div>
<div class="section" id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h2>
<p>Curiously windows resized, out of the box, with no fuss.  But that is, I guess,
I had already install GuestAdditions onto the VMM as above.</p>
</div>
<div class="section" id="loading-from-cd-dvd-drive">
<h2>Loading from CD/DVD Drive<a class="headerlink" href="#loading-from-cd-dvd-drive" title="Permalink to this headline">¶</a></h2>
<p>Booting from a downloaded iso is nice.
However I have Windows Disk and wanted to load from CD.</p>
<p>This seems ok, but hald slowed my host machine down to a crawl - so I used a .iso of a windows disk
This .iso approach is a <em>lot</em> simpler.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>from the wiki
# atapicam kernel module needs to be loaded
# HAL has to run at the moment
# Permissions to access /dev/xpt0, /dev/cdN and /dev/passN

$ kldload atapicam
$ echo atapicam_load=&quot;YES&quot; &gt;&gt; /boot/loader.conf
$ echo dbus_enable=&quot;YES&quot; &gt;&gt; /etc/rc.conf
$ echo hald_enable=&quot;YES&quot; &gt;&gt; /etc/rc.conf

http://www.freebsd.org/gnome/docs/halfaq.html
http://wiki.freebsd.org/VirtualBox
</pre></div>
</div>
</div>
<div class="section" id="networking">
<h2>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h2>
<p>Getting a NAT based IP address for the VM machine is an out of the box issue -
so one can initiate connections from the VM to anywhere.  However, if you want
to run SeleniumRC, you want to connect <em>to</em> the VM (the SeleniumRC runs a server
that python client connects to and says &#8220;open browser to www.google.com&#8221;.)</p>
<p>However, we want to do Ethernet bridging, - the simple way is to bring up the
VMM.  There are 4 virtual Ethernet adaptors - one can be the NAT, one can be a
bridged adaptor to the real host NIC.  So just set the NIC adapator number 2 to
brided adaptor, and you can connect to that IP from any machine on the subnet
the host is on.</p>
<div class="section" id="kqemu">
<h3>KQemu<a class="headerlink" href="#kqemu" title="Permalink to this headline">¶</a></h3>
<p>Qemu is a CPU emulator written by Fabrice Bellard.  It is able to translate
system calls from one OS, written for one CPU to the binary equivalents for
another OS or another CPU.  In short one can run Windows OS on a FreeBSD host.</p>
<p>With KQemu, this has been adapted to run on VMX flagged CPUs (specifically on Linux)</p>
</div>
</div>
<div class="section" id="id2">
<h2>Install<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">emulators</span><span class="o">/</span><span class="n">kqemu</span><span class="o">-</span><span class="n">kmod</span><span class="p">;</span> <span class="n">make</span> <span class="n">install</span> <span class="n">clean</span>
<span class="n">cd</span> <span class="n">emulators</span><span class="o">/</span><span class="n">qemu</span><span class="p">;</span> <span class="n">make</span> <span class="n">install</span> <span class="n">clean</span>

<span class="p">(</span><span class="n">setup</span> <span class="n">Linux</span><span class="o">-</span><span class="n">compatibility</span> <span class="n">on</span> <span class="n">FreeBSD</span> <span class="n">first</span> <span class="n">too</span><span class="p">)</span>
</pre></div>
</div>
<p>Somewhere to put it:
we need a &#8216;virtual disk&#8217; - a file that is nothing but empty
space for the img to run. its very own hard disk, as it were.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">qemu</span><span class="o">-</span><span class="n">img</span> <span class="n">create</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">DATA</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">disk</span> <span class="mi">4</span><span class="n">G</span>

<span class="ow">or</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dd</span> <span class="n">of</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">DATA</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">disk</span> <span class="n">bs</span><span class="o">=</span><span class="mi">1024</span> <span class="n">seek</span><span class="o">=</span><span class="mi">4194304</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>Now download the .iso file</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fetch</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">Whereever</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">hell</span><span class="o">/</span><span class="n">ubunutu</span><span class="o">/</span><span class="ow">is</span><span class="o">/</span><span class="n">kept</span>
</pre></div>
</div>
<p>Install it the normal way</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">qemu</span> <span class="o">-</span><span class="n">hda</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">DATA</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">disk</span> <span class="o">-</span><span class="n">cdrom</span> \
 <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pbrian</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">-</span><span class="mf">9.10</span><span class="o">-</span><span class="n">desktop</span><span class="o">-</span><span class="n">i386</span><span class="o">.</span><span class="n">iso</span> <span class="o">-</span><span class="n">m</span> <span class="mi">192</span> <span class="o">-</span><span class="n">boot</span> <span class="n">d</span>
</pre></div>
</div>
<p>At this point the file image is just like a HDD that has been installed with Ubuntu
But to start the image normally:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">qemu</span> <span class="o">-</span><span class="n">hda</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">DATA</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">disk</span> <span class="o">-</span><span class="n">m</span> <span class="mi">192</span>
</pre></div>
</div>
</div>
<div class="section" id="ripping-xp-cd">
<h2>Ripping XP CD<a class="headerlink" href="#ripping-xp-cd" title="Permalink to this headline">¶</a></h2>
<p>Its much easier with a .iso file than pass-through</p>
<blockquote>
<div># dd if=/dev/acd0t01 of=/home/pbrian/downloads/xp.iso bs=2048</div></blockquote>
<p>Really it was awful to get this far.  Had to read the man page to the
bottom - adding bs=2048 solved a lot.</p>
<p># dd if=/dev/acd0t01 of=/home/pbrian/downloads/xp.iso
dd: /dev/acd0t01: Invalid argument
0+0 records in
0+0 records out
0 bytes transferred in 0.000084 secs (0 bytes/sec)</p>
<p>plus why the acd0t01 worked when acd0 did not?</p>
<p>Actually it seems to be the bs=2048 - CD&#8217;s transfer at that rate and dd fails
presumably after the first 512Bytes come and 513th is not buffered and a CRC
fails somewhere.</p>
<p>Anyway,</p>
<blockquote>
<div>dd if=/dev/acd0 of=/home/pbrian/downloads/xp.iso bs=2048</div></blockquote>
<p>works.  Now I have the ISO I install it the usual way, and presto, Windows on
Virtual Machine.  And with Bridging.</p>
<div class="section" id="virtualbox">
<h3>VirtualBox<a class="headerlink" href="#virtualbox" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="first-guest">
<h2>First guest<a class="headerlink" href="#first-guest" title="Permalink to this headline">¶</a></h2>
<p>The first one to create is Unbuntu.  Its simple and free.
Download the latest version (www.ubuntu.com), and keep somewhere safe.
Create a harddisk - there is a simple wizard on VirtualBox, I recommend
512MB RAM and min 8GB disk space, 5 years ago that was a damn good spec.!</p>
<p>Then open File &gt; Virtual Media Manager, which will allow us to make the ISO
visible. Just &#8220;add&#8221; a CD/DVD image, and it is available to the guest image.  Now
go to Settings for the image. Choose Storage and click on the CD below the IDE
COntroller You should see on RHS &#8220;Attributes&#8221; of the CD device, and can select
any one of the &#8220;mounted&#8221; CD drives above to &#8220;put into&#8221; the virtual CD tray.</p>
<p>Start the image as usual, and select boot menu (probably f12), boot from the CD.
You should see a normal install from ubuntu.  Just install.</p>
</div>
<div class="section" id="bridged-networking">
<h2>Bridged Networking<a class="headerlink" href="#bridged-networking" title="Permalink to this headline">¶</a></h2>
<p>Compile Kernel with Netgraph included Basically, bridge networking uses a driver
in the Host OS, to bypass the usual host network stack (ie grab packets before
they have gone through all the usual layers).  Netgraph is one such popular way
of doing this.  Thus the virtual machine can take apacket off the real NIC, read
it and then put its own reply back onto the real NIC at the same layer - it
looks to the Host as if right next door on the Ethernet network is another NIC
reading the packets it reads and putting more on the network.</p>
<p>The Virtual machine on the other hand just sets up its stack as normal, thinking
it has access to a genuine real NIC.</p>
<p>Its a bit like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Host</span>  <span class="n">VM</span>
 \    <span class="o">/</span>
  \  <span class="o">/</span>
   <span class="o">--</span>  <span class="n">Netgraph</span>
   <span class="o">|</span>
   <span class="n">NIC</span>
</pre></div>
</div>
<p>But not really.</p>
<p><a class="reference external" href="http://www.virtualbox.org/manual/ch06.html">http://www.virtualbox.org/manual/ch06.html</a></p>
</div>
<div class="section" id="bibliography">
<h2>bibliography<a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">help</span><span class="o">.</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">community</span><span class="o">/</span><span class="n">Installation</span><span class="o">/</span><span class="n">QemuEmulator</span>
<span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">help</span><span class="o">.</span><span class="n">ubuntu</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">community</span><span class="o">/</span><span class="n">WindowsXPUnderQemuHowTo</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">freebsd</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">qemu</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dryice</span><span class="o">.</span><span class="n">name</span><span class="o">/</span><span class="n">blog</span><span class="o">/</span><span class="n">freebsd</span><span class="o">/</span><span class="n">using</span><span class="o">-</span><span class="n">freebsd</span><span class="o">-</span><span class="k">as</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">bridge</span><span class="o">-</span><span class="ow">and</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">dummynet</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">shape</span><span class="o">-</span><span class="n">the</span><span class="o">-</span><span class="n">traffic</span><span class="o">/</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">freebsd</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">en</span><span class="o">/</span><span class="n">books</span><span class="o">/</span><span class="n">handbook</span><span class="o">/</span><span class="n">network</span><span class="o">-</span><span class="n">bridging</span><span class="o">.</span><span class="n">html</span>
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Well, attitudes to this might be changing.  ARM-based blade servers can
actually deliver more CPU cycles per Watt, actually being more green, but
other issues start to dominate, ranging from deciding if your work is IO
bound or CPU bound, or handling the logistics required.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Paul Brian.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>